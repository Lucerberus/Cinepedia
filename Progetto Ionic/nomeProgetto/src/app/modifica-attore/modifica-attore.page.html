

<ion-content *ngIf="!attore_selezionato" class="attore-content">
  <div class="center-wrapper">
    <div class="custom-searchbar">
      <input
        type="text"
        [(ngModel)]="attore_cercato"
        placeholder="Cerca attore da modificare..."
        (input)="onInputNomeAttore($event)"
      />
      <button *ngIf="attore_cercato" class="clear-button" (click)="resetSearch()">✕</button>
      <button class="bottone-ricerca">
        <img src="assets/icon/search.svg" alt="Cerca" />
      </button>

      <!-- Lista suggerimenti -->
      <ul class="suggerimenti-lista" *ngIf="suggerimentiAttori.length > 0">
        <li *ngFor="let attore of suggerimentiAttori" (click)="selezionaSuggerimentoAttore(attore)">
          <img [src]="getImageFilm(attore.profile_path)" alt="{{ attore.name }}" />
          <span>{{ attore.name }}</span>
        </li>
      </ul>
    </div>
  </div>
</ion-content>

<ion-content *ngIf="attore_selezionato" class="attore-content">
  <div class="film-layout">
    <!-- Sezione attore -->
    
    <div class="attore-immagine">
       <div class="CampiInput">
          <label class="NomiInput">Nome e Cognome</label>
          <ion-card class="title-card">
            <ion-card-content>
              <ion-input [(ngModel)]="attoreCorrente.name" placeholder="Es. Giancarlo Esposito"></ion-input>
            </ion-card-content>
          </ion-card>
          <p class="errore" *ngIf="erroreNome">*Inserire un nome valido</p>
        </div>
      <ion-card class="cover-wrapper">
        <img [src]="getImageAttore(attoreCorrente.profile_path)" class="cover-image" />
        <input type="file" accept="image/*" (change)="onImageSelected($event)" hidden #fileInput />
        <ion-button fill="clear" expand="block" (click)="fileInput.click()">Carica foto</ion-button>
      </ion-card>
      <p class="errore" *ngIf="erroreProfilePath">*Inserire una foto valida</p>
    </div>

    <ion-card class="cover-wrapper2">
      <div class="CampiInput">
        <label class="NomiInput">Biografia</label>
        <ion-card class="description-card1">
          <ion-card-content>
            <ion-textarea [(ngModel)]="attoreCorrente.biography" placeholder="Biografia..." autoGrow="true"></ion-textarea>
          </ion-card-content>
        </ion-card>
        <p class="errore" *ngIf="erroreBiografia">*Inserire una biografia valida</p>
      </div>

      <div class="input-colonna">
        <div class="input-riga">

          <div *ngIf="attoreCorrente.place_of_birth" class="CampiInput">
            <label class="NomiInput">Luogo di nascita</label>
            <ion-card class="title-card">
              <ion-card-content>
                <ion-input [(ngModel)]="attoreCorrente.place_of_birth" placeholder="es. Napoli,Italia"></ion-input>
              </ion-card-content>
            </ion-card>
          <p class="errore" *ngIf="erroreLuogoNascita">*Inserire un luogo di nascita es. Napoli,Italia</p>
          </div>

          <div class="CampiInput">
            <label class="NomiInput">Data di nascita</label>
            <ion-card class="title-card">
              <ion-card-content>
                <ion-input [(ngModel)]="attoreCorrente.birthday" placeholder="aaaa-mm-gg"></ion-input>
              </ion-card-content>
            </ion-card>
            <p class="errore" *ngIf="erroreDataNascita">*Inserire una data di nascita valida</p>
          </div>

          <div *ngIf="attoreCorrente.deathday" class="CampiInput">
            <label class="NomiInput">Data di morte (facoltativa)</label>
            <ion-card class="title-card">
              <ion-card-content>
                <ion-input [(ngModel)]="attoreCorrente.deathday" placeholder="aaaa-mm-gg"></ion-input>
              </ion-card-content>
            </ion-card>
            <p class="errore" *ngIf="erroreDataMorte">*Inserire una data di morte valida</p>
          </div>

          <div class="CampiInput">
          <label class="NomiInput">Genere</label>
          <ion-card class="title-card">
            <ion-card-content>
              <ion-select [(ngModel)]="attoreCorrente.gender" placeholder="Genere">
                <ion-select-option [value]="0">Non specificato</ion-select-option>
                <ion-select-option [value]="1">Femmina</ion-select-option>
                <ion-select-option [value]="2">Maschio</ion-select-option>
                <ion-select-option [value]="3">Non-binary</ion-select-option>
              </ion-select>
            </ion-card-content>
          </ion-card>
          <p class="errore" *ngIf="erroreGenere">*Selezionare un genere</p>
        </div>


        </div>


        
      </div>
      <ion-card class="cover-bottoni">
      <ion-button class="AnnullaButton" fill="clear "expand="block"(click)="apriConfermaAnnulla()">Annulla</ion-button>

<ion-button class="AggiungiButton" fill="clear "expand="block" (click)="apriConferma()">Modifica Attore</ion-button>
  </ion-card>
    </ion-card>

     
  </div>

  <!-- Lista dei film -->
  <div class="input-riga2">
    <h2 style="color: white; margin: 5px;">Film:</h2>
    <ion-button *ngIf="!mostraFormAggiungiFilm" fill="clear" (click)="FormAggiungiFilm()" style="margin: 50px;">
      <img src="assets/icon/circle-plus.svg" width="35" height="35" />
    </ion-button>
  </div>

  <div *ngIf="listaFilm" class="scroll-section">
    <button class="scroll-button left" (click)="scrollLeft()">◀</button>
    <div #scrollContainer class="cast-scroll" id="film">
      <div *ngFor="let film of listaFilm; let i = index" class="cast-item">
        <ion-card *ngIf="film" class="actor-card">
          <img [src]="getImageFilm(film.poster_path)" class="actor-image" />
          <ion-card-content class="actor-name">{{ film.title }}</ion-card-content>
          <ion-card-content class="character-name">{{ film.character_name }}</ion-card-content>

          <div class="sezione-edit-remove">
            <ion-button fill="clear" (click)="FormModificaFilm(film, i)">
              <img src="assets/icon/pencil.svg" width="20" height="20" />
            </ion-button>
            <ion-button fill="clear" (click)="RimuoviFilm(i)">
              <img src="assets/icon/circle-x.svg" width="20" height="20" />
            </ion-button>
          </div>
        </ion-card>
      </div>
    </div>
    <button class="scroll-button right" (click)="scrollRight()">▶</button>
  </div>

  <!-- Form per aggiungere film -->
  <div *ngIf="mostraFormAggiungiFilm" class="film-layout">
    <div class="attore-immagine ">   
      <img [src]="getImageFilm(filmCorrente.poster_path)" class="cover-image">
    </div>
    <ion-card class="cover-wrapper2">
      <div class="CampiInput">
        <label class="NomiInput">Titolo del film</label>
        <ion-card class="title-card">
          <ion-card-content>
            <ion-input [readonly]="campoBloccato" [(ngModel)]="filmCorrente.title" placeholder="Es. Breaking Bad" (input)="onInputNomeFilm($event)"></ion-input>
            <ul class="suggerimenti-listaFilm" *ngIf="suggerimentiFilm.length > 0">
               <li *ngFor="let film of suggerimentiFilm" (click)="selezionaSuggerimentoFilm(film)">
                <img [src]="getImageFilm(film.poster_path)" alt="{{ film.title }}"/>
                 <span>{{ film.title }}</span> 
               </li>
              </ul>
          </ion-card-content>
        </ion-card>
        <p class="errore" *ngIf="erroreTitolo">*Inserire un titolo di un film esistente</p>


      </div>

      <div class="CampiInput">
        <label class="NomiInput">Ruolo nel film</label>
        <ion-card class="title-card">
          <ion-card-content>
            <ion-input [(ngModel)]="filmCorrente.character_name" placeholder="Es. Gustavo Fring"></ion-input>
          </ion-card-content>
        </ion-card>
        <p class="errore" *ngIf="erroreRuolo">*Inserire un ruolo es. Gustavo Fring</p>

      </div>
    </ion-card>

    <ion-card class="cover-wrapper2">
      <ion-button *ngIf="!modificaAttiva" class="AggiungiButton" fill="clear" expand="block" (click)="aggiungiFilm()">Aggiungi film</ion-button>
      <ion-button *ngIf="modificaAttiva" class="AggiungiButton" fill="clear" expand="block" (click)="aggiungiFilm()">Applica modifiche</ion-button>
      <ion-button class="AnnullaButton" fill="clear" expand="block" (click)="annullaFilm()">Annulla</ion-button>
    </ion-card>
  </div>
</ion-content>
